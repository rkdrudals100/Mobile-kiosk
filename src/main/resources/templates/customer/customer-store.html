<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<meta name="description" content="">
	<meta name="author" content="">
	<link rel="icon" href="/docs/4.0/assets/img/favicons/favicon.ico">
	<script src="https://kit.fontawesome.com/a4bdcbdc63.js" crossorigin="anonymous"></script>

	<title>모바일 키오스크</title>

	<!-- CSS only -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<link href="album.css" rel="stylesheet">

</head>


<body>
	<!-- style="position: sticky; top: 0; z-index: 1;" -->
	<header class="fixed-top" style="z-index: 2;">
        <nav class="navbar fixed-top navbar-light bg-none">
            <div class="container-fluid">
				<a href="#" onclick="goBack()" class="text-dark text-decoration-none">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-arrow-left-short" viewBox="0 0 16 16">
						<path fill-rule="evenodd" d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"/>
	  				</svg>
                </a>
				<div></div>
				<!--
                <a href="./customer-sub.html" class="navbar-brand d-flex justify-content-center align-items-center text-dark text-decoration-none">
                    <strong>KPL치킨 한경대점</strong>
                </a>-->
                <div></div>
            </div>
        </nav>
    </header>

	<div class="card-body bg-white border-top border-bottom" style="position: sticky; top: 0; z-index: 1;">
		<h5 class="card-text text-center"><strong>장바구니</strong></h5>
	</div>

	<div class="container mt-3" style="margin-left: 2px; margin-right: 2px;">
		<div class="row mt-2">
			<div class="col">
				<div class="form-check">
					<label class="form-check-label">
						<input class="form-check-input" type="radio" name="check" id="here">
						매장에서 식사
					</label>
				</div>
			</div>
		</div>

		<div class="row mt-2">
			<div class="col">
				<div class="form-check">
					<label class="form-check-label">
						<input class="form-check-input" type="radio" name="check" id="takeaway">
						포장
					</label>
				</div>
			</div>
		</div>
	</div>

	<hr style="border: solid 3px gray;">
	<!-- 추가 메뉴 -->
	<div class="container mt-4" style="margin-bottom: 51px; margin-left: 2px; margin-right: 2px;">
		<th:block th:each="orderItem : ${order.getOrderItems()}">
			<div class="row">
				<div class="col">
					<h5>[[${orderItem.getItem.name}]]</h5>
				</div>
				<div class="col text-end">
					<form class="d-flex justify-content-end d-inline" th:method="delete" th:action="|/customer/shopping-basket/${orderItem.id}|">
						<button type="submit" class="btn-close btn-sm" style="color: gray;" aria-label="Close"></button>
					</form>
				</div>
				<div style="font-size: 15px; line-height: 30%; color: gray;">
					<p></p>
					<p>ㅇ 가격: [[${orderItem.orderItemPrice}]] 원</p>
					<p>ㅇ 옵션 선택: ...</p>
				</div>
				<div class="col-9 text-end" style="right: 5vW;">
					<div id='_price1' style="display:none;">[[${orderItem.orderItemPrice}]]</div>
					<div class="d-inline total" id='price1'>[[${orderItem.orderItemPrice}]]</div><span>원</span>
				</div>
				<div class="col-3 text-center">
					<svg xmlns="http://www.w3.org/2000/svg" onclick='count("minus","1")' width="20" height="20" fill="currentColor" class="bi bi-dash-circle d-inline" viewBox="0 0 16 16">
						<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
						<path d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"/>
					</svg>
					<div class="d-inline" id='result1'>1</div><span>개</span>
					<svg onclick='count("plus","1")' xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-plus-circle d-inline" viewBox="0 0 16 16">
						<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
						<path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
					</svg>
				</div>

			</div>
			<hr>
		</th:block>
	</div>

	<div class="container mt-4" style="margin-left: 2px; margin-right: 2px;">
		<div class="row">
		   	<div class="col">
			  	<p><strong>총 주문금액</strong></p>
		   	</div>
		   	<div class="col text-end">
				<div class="d-inline"><strong id='totalPrcie'>0000</strong></div>
		   	</div>
		</div>
	</div>
	<hr>

	

	<form method="get" th:action="@{/customer/payment}">
		<button type="submit" class="btn btn-primary fixed-bottom" style="width: 100%; height: 50px; border-radius: 0;">
			<div class="d-inline" id='totalPrcie2'>0000</div>
		</button>
	</form>

    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
    </script>
	<script>
		window.onload = function () {
			const totalPrcie = document.getElementById('totalPrcie');
			const totalPrcie2 = document.getElementById('totalPrcie2');
			let elements = document.querySelectorAll('.total');


			for (let elem of elements) {
				totalPrcie.innerText = parseInt(totalPrcie.innerText) + parseInt(elem.innerText);
			}
			totalPrcie2.innerText = parseInt(totalPrcie.innerText);
		}


		function goBack() {
			window.history.back();
		}

		function count(type, seq) {
			// 결과를 표시할 element
			const resultElement = document.getElementById('result' + seq);
			const priceElement = document.getElementById('price' + seq);
			const fixPriceElement = document.getElementById('_price' + seq);
			const totalPrcie = document.getElementById('totalPrcie');
			const totalPrcie2 = document.getElementById('totalPrcie2');
			// 현재 화면에 표시된 값
			let number = resultElement.innerText;
			let price = priceElement.innerText;
			let priceFix = fixPriceElement.innerText;
			// 더하기/빼기
			if (type === 'plus') {
				number = parseInt(number) + 1;
				totalPrcie.innerText = parseInt(totalPrcie.innerText) + parseInt(priceFix);
			} else if (type === 'minus') {
				if (number > 1) {
					number = parseInt(number) - 1;
					totalPrcie.innerText = parseInt(totalPrcie.innerText) - parseInt(priceFix);
				}
			}

			// 결과 출력
			resultElement.innerText = number;
			priceElement.innerText = priceFix * number;
			totalPrcie2.innerText = parseInt(totalPrcie.innerText);

		}
	</script>
</body>

</html>